<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GOALSTORM! - LOADING</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
/* --- 1. SETUP & ASSETS --- */
:root {
    --player-idle:    url('p1.png');
    --player-windup:  url('p2.png');
    --player-kick:    url('p3.png');
    
    --ball-normal:    url('b1.png');
    --ball-super:     url('b2.png');

    /* A tight 1.2 second sting */
    --total-time: 1.2s;
}

/* --- 2. GLOBAL RESET --- */
* { box-sizing: border-box; margin: 0; padding: 0; }
body { 
    background: #000; 
    font-family: 'Press Start 2P', cursive; 
    overflow: hidden; 
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* --- 3. THE STING LAYER (The Animation) --- */
#sting-layer {
    position: fixed; 
    inset: 0; 
    z-index: 9999;
    background: #000;
    display: flex; 
    align-items: center; 
    justify-content: center;
    /* Fades out smoothly after animation */
    animation: fadeOut 0.2s ease-out 1.4s forwards;
}

/* MOBILE FIX: The Arena uses Aspect Ratio.
   It creates a responsive "box" that is always twice as wide as it is tall.
   Everything inside is positioned with %, so it never breaks on phones.
*/
.arena {
    width: 100%;
    max-width: 800px; /* Cap size on big screens */
    aspect-ratio: 2 / 1; /* Keeps the stage shape perfect on mobile */
    position: relative;
    overflow: hidden; /* Clips the fireball when it flies out */
}

/* --- THE PLAYER --- */
.sprite-player {
    position: absolute; 
    left: 10%; 
    bottom: 5%; /* Relative to the arena floor */
    width: 20%; /* Responsive Size */
    aspect-ratio: 1/1; /* Keeps player square */
    z-index: 2;
    
    background-image: var(--player-idle);
    background-size: contain; 
    background-repeat: no-repeat; 
    background-position: bottom center;

    /* 'step-end' gives it that chunky NES frame-swapping feel */
    animation: player-sequence var(--total-time) step-end forwards;
}

/* --- THE BALL --- */
.sprite-ball {
    position: absolute; 
    left: 26%; /* Positioned relative to player foot */
    bottom: 8%; 
    z-index: 1;
    
    /* Start State */
    width: 6%; /* Responsive size for normal ball */
    aspect-ratio: 1/1; 
    
    background-image: var(--ball-normal);
    background-size: contain; 
    background-repeat: no-repeat;
    background-position: center left; /* aligned left so it grows outward */

    animation: ball-sequence var(--total-time) linear forwards;
}

/* --- UI FX (Text & Bar) --- */
.shout-text {
    position: absolute; 
    top: -20%; 
    left: 0; 
    width: 100%;
    text-align: center;
    color: #ffd60a; 
    font-size: 3vw; /* Responsive font size */
    opacity: 0;
    text-shadow: 2px 2px #ff0055;
    animation: text-pop 0.1s linear 0.6s forwards, text-hide 0.1s linear 0.9s forwards;
}

.flash-screen {
    position: absolute; inset: 0; background: #fff; opacity: 0; pointer-events: none; z-index: 999;
    animation: flash 0.15s linear 0.65s forwards;
}

/* =========================================
   ANIMATION KEYFRAMES
   ========================================= */

/* PLAYER: 
   0%: Idle
   50%: Windup (Backswing)
   55%: Kick (Impact)
*/
@keyframes player-sequence {
    0%   { background-image: var(--player-idle); }
    50%  { background-image: var(--player-windup); }
    55%  { background-image: var(--player-kick); transform: translateX(2%); } 
    100% { background-image: var(--player-kick); transform: translateX(2%); }
}

/* BALL PHYSICS:
   The width snaps instantly at 55% to match the fireball image.
*/
@keyframes ball-sequence {
    /* --- WAITING --- */
    0%   { background-image: var(--ball-normal); transform: translateX(0); width: 6%; aspect-ratio: 1/1; }
    54%  { background-image: var(--ball-normal); transform: translateX(0); width: 6%; aspect-ratio: 1/1; }
    
    /* --- IMPACT (Snap to Fireball) --- */
    55%  { 
        background-image: var(--ball-super);  
        width: 25%; /* Fireball is wider */
        aspect-ratio: auto; /* Allow rectangle shape */
        height: 15%; /* Match relative height */
        transform: translateX(0); 
        animation-timing-function: cubic-bezier(0.1, 1, 0.2, 1); /* Explosive ease-out */
    }
    
    /* --- FLIGHT --- */
    100% { 
        background-image: var(--ball-super);
        width: 25%;
        height: 15%;
        aspect-ratio: auto; 
        transform: translateX(300%); /* Fly off stage using % */
    }
}

@keyframes text-pop { 0% { opacity: 0; transform: scale(0.5); } 100% { opacity: 1; transform: scale(1.2); } }
@keyframes text-hide { to { opacity: 0; } }
@keyframes flash { 0%, 100% { opacity: 0; } 50% { opacity: 1; } }
@keyframes fadeOut { to { opacity: 0; visibility: hidden; } }

/* =========================================
   HOMEPAGE (Content Layer)
   ========================================= */
#homepage {
    position: absolute;
    width: 100%;
    height: 100vh;
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    background: #0f0e17; color: #fff;
    opacity: 0; 
    animation: fadeInPage 0.5s ease-in 1.5s forwards;
}
@keyframes fadeInPage { to { opacity: 1; } }

.nav-bar { display: flex; gap: 20px; margin-bottom: 40px; }
.nav-bar a { color: #00f6ff; text-decoration: none; border: 1px solid #00f6ff; padding: 10px 20px; font-size: 14px; }
.hero h1 { font-size: 40px; color: #ffd60a; text-shadow: 4px 4px #ff0055; margin-bottom: 20px;}

</style>
</head>
<body>

    <div id="sting-layer">
        <div class="flash-screen"></div>
        <div class="arena">
            <div class="sprite-player">
                <div class="shout-text">SURGE!</div>
            </div>
            <div class="sprite-ball"></div>
        </div>
    </div>

    <div id="homepage">
        <div class="nav-bar">
            <a href="#">HOME</a>
            <a href="#">PLAY</a>
            <a href="#">SCORES</a>
        </div>
        <div class="hero">
            <h1>GOALSTORM!</h1>
            <p style="color:#aaa; font-family:monospace;">WELCOME TO ROUND 3</p>
        </div>
    </div>

<script>
    // Cleanup script
    window.addEventListener('load', () => {
        setTimeout(() => {
            const sting = document.getElementById('sting-layer');
            if(sting) sting.remove();
        }, 2000); 
    });
</script>

</body>
</html>
