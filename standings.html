<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GOALSTORM! - ULTRA ROULETTE</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
/* --- 1. CORE PALETTE --- */
:root {
    --neon-cyan: #00f6ff;
    --neon-pink: #ff0055;
    --neon-yellow: #ffd60a;
    --bg-dark: #0f0e17;
    --bg-panel: #141414;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body { 
    background: #000; 
    font-family: 'Press Start 2P', cursive; 
    color: #fff;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-x: hidden;
}

/* --- 2. HUD --- */
.hud {
    width: 100%;
    padding: 20px;
    display: flex;
    justify-content: space-between;
    background: #111;
    border-bottom: 4px solid #333;
    z-index: 20;
    position: sticky; top: 0;
}
.balance-box { color: var(--neon-yellow); text-shadow: 2px 2px var(--neon-pink); font-size: 14px; }
.spins-box { color: var(--neon-cyan); font-size: 14px; }

/* --- 3. MAIN STAGE --- */
.stage {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 50px;
    padding: 40px 20px;
    width: 100%;
    max-width: 1200px;
}

/* --- 4. THE WHEEL (Perfected) --- */
.wheel-wrapper {
    position: relative;
    width: 500px; /* Big Desktop Size */
    height: 500px;
    max-width: 90vw; /* Mobile Responsive */
    max-height: 90vw;
    filter: drop-shadow(0 0 20px rgba(0,246,255,0.15));
}

.pointer {
    position: absolute;
    top: -20px;
    left: 50%;
    transform: translateX(-50%);
    width: 0; 
    height: 0; 
    border-left: 20px solid transparent;
    border-right: 20px solid transparent;
    border-top: 40px solid #fff;
    z-index: 10;
    filter: drop-shadow(0 4px 0 #000);
}

.wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 12px solid #1a1a1a;
    position: relative;
    overflow: hidden;
    transition: transform 6s cubic-bezier(0.1, 1, 0.1, 1);
    /* The gradient is generated via JS to match colors perfectly */
}

/* The Spoke Container - This centers the number */
.spoke {
    position: absolute;
    top: 0; left: 50%;
    width: 2px; /* Invisible line width */
    height: 50%; /* Radius length */
    transform-origin: bottom center; /* Pivot from center of wheel */
    display: flex;
    justify-content: center; /* Center horizontally */
    padding-top: 15px; /* Push number down from rim */
}

.num-text {
    font-size: 12px;
    color: #fff;
    text-shadow: 1px 1px 0 #000;
    /* No rotation needed here because the spoke rotates */
}

/* --- 5. LEGEND (Variables) --- */
.legend-panel {
    width: 320px;
    background: #111;
    border: 2px solid #333;
    padding: 25px;
}

.legend-header { 
    text-align: center; 
    color: #666; 
    font-size: 12px; 
    margin-bottom: 25px; 
    border-bottom: 1px solid #333;
    padding-bottom: 10px;
}

.rule-row {
    display: flex;
    align-items: center;
    margin-bottom: 18px;
    font-size: 10px;
    line-height: 1.6;
}

.dot { width: 16px; height: 16px; margin-right: 15px; border: 2px solid #fff; }
.d-yellow { background: var(--neon-yellow); box-shadow: 0 0 8px var(--neon-yellow); }
.d-cyan   { background: var(--neon-cyan);   box-shadow: 0 0 8px var(--neon-cyan); }
.d-pink   { background: var(--neon-pink);   box-shadow: 0 0 8px var(--neon-pink); }

.sub-text { font-size: 8px; color: #888; display: block; margin-top: 4px; }

/* --- 6. CONTROLS --- */
.controls-area {
    width: 100%;
    max-width: 600px;
    margin: 0 auto 30px auto;
    text-align: center;
    padding: 0 20px;
}

.msg-display {
    height: 60px;
    display: flex; align-items: center; justify-content: center;
    color: #fff;
    font-size: 14px;
    margin-bottom: 20px;
    text-shadow: 2px 2px #000;
    background: #111;
    border: 1px dashed #333;
    line-height: 1.5;
    padding: 10px;
}

.btn-group { display: flex; gap: 10px; justify-content: center; margin-bottom: 15px; flex-wrap: wrap; }

button {
    background: #000;
    border: 2px solid #fff;
    color: #fff;
    font-family: 'Press Start 2P', cursive;
    padding: 15px 25px;
    cursor: pointer;
    font-size: 10px;
    transition: 0.1s;
}
button:hover:not(:disabled) { transform: translateY(-3px); background: #222; }
button:active { transform: translateY(0); }
button:disabled { opacity: 0.4; cursor: not-allowed; }

.btn-bet { border-color: var(--neon-cyan); color: var(--neon-cyan); }
.btn-spin { 
    border-color: var(--neon-yellow); 
    color: var(--neon-yellow); 
    background: #1a1a1a; 
    width: 100%;
    padding: 20px;
    font-size: 16px;
}

/* --- 7. MARKET --- */
.shop-section {
    width: 100%;
    flex-grow: 1;
    background: #0a0a0a;
    border-top: 2px solid #222;
    padding: 30px;
}
.player-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 15px;
}
.player-card {
    background: #141414;
    border: 1px solid #333;
    padding: 15px;
    text-align: center;
    opacity: 0.3;
    font-size: 10px;
}
.player-card.affordable {
    opacity: 1;
    border-color: var(--neon-cyan);
    background: #0f0e17;
    box-shadow: 0 0 10px rgba(0,246,255,0.2);
    cursor: pointer;
}

/* FX */
@keyframes flashWin { 0% { background: var(--neon-cyan); } 100% { background: #000; } }
@keyframes flashLoss { 0% { background: var(--neon-pink); } 100% { background: #000; } }
.win-fx { animation: flashWin 0.5s ease-out; }
.lose-fx { animation: flashLoss 0.5s ease-out; }

</style>
</head>
<body>

<div class="hud">
    <div class="balance-box">BANK: £<span id="bal">1,000,000</span></div>
    <div class="spins-box">SPINS: <span id="spins">3</span></div>
</div>

<div class="stage">
    
    <div class="wheel-wrapper">
        <div class="pointer"></div>
        <div class="wheel" id="wheel"></div>
    </div>

    <div class="legend-panel">
        <div class="legend-header">RISK VARIABLES</div>
        
        <div class="rule-row">
            <div class="dot d-yellow"></div>
            <div>
                <span style="color:var(--neon-yellow)">0: JACKPOT</span>
                <span class="sub-text">WORLDIE GOAL (x10 WIN)</span>
            </div>
        </div>

        <div class="rule-row">
            <div class="dot d-cyan"></div>
            <div>
                <span style="color:var(--neon-cyan)">CYAN (EVEN)</span>
                <span class="sub-text">HAT-TRICK (x4 WIN)</span>
            </div>
        </div>

        <div class="rule-row">
            <div class="dot d-cyan" style="opacity:0.6"></div>
            <div>
                <span style="color:var(--neon-cyan); opacity:0.8">CYAN (ODD)</span>
                <span class="sub-text">GOAL (x2 WIN)</span>
            </div>
        </div>

        <div class="rule-row">
            <div class="dot d-pink" style="opacity:0.6"></div>
            <div>
                <span style="color:var(--neon-pink); opacity:0.8">PINK (EVEN)</span>
                <span class="sub-text">VAR CHECK (SAVE 50%)</span>
            </div>
        </div>

        <div class="rule-row">
            <div class="dot d-pink"></div>
            <div>
                <span style="color:var(--neon-pink)">PINK (ODD)</span>
                <span class="sub-text">RED CARD (LOSE ALL)</span>
            </div>
        </div>
    </div>
</div>

<div class="controls-area">
    <div class="msg-display" id="msg">MARKET OPEN<br>PLACE BET TO START</div>
    <div class="btn-group">
        <button class="btn-bet" onclick="setBet(100000)">£100K</button>
        <button class="btn-bet" onclick="setBet(500000)">£500K</button>
        <button class="btn-bet" onclick="setBet('all')">ALL IN</button>
    </div>
    <button class="btn-spin" id="spinBtn" onclick="spin()" disabled>SPIN</button>
</div>

<div class="shop-section">
    <div class="legend-header">TRANSFER TARGETS</div>
    <div class="player-grid" id="grid"></div>
</div>

<script>
    // --- 1. CONFIGURATION ---
    // Standard European Order
    const wheelOrder = [
        0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 
        10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26
    ];
    // Roulette "Red" Numbers (mapped to Pink)
    const redNumbers = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];

    // --- 2. STATE ---
    let balance = 1000000;
    let spinsLeft = 3;
    let currentBet = 0;
    let rotation = 0;

    // --- 3. DOM ELEMENTS ---
    const wheel = document.getElementById('wheel');
    const balEl = document.getElementById('bal');
    const spinEl = document.getElementById('spins');
    const msgEl = document.getElementById('msg');
    const spinBtn = document.getElementById('spinBtn');
    const grid = document.getElementById('grid');

    // --- 4. BUILD THE WHEEL (Visuals) ---
    function initWheel() {
        const sliceDeg = 360 / 37; // ~9.72 deg
        let grad = 'conic-gradient(';

        wheelOrder.forEach((num, i) => {
            // COLOR LOGIC (Strict Theme)
            let color;
            if (num === 0) {
                color = 'var(--neon-yellow)'; // Jackpot
            } else if (redNumbers.includes(num)) {
                color = 'var(--neon-pink)';   // Loss Zone
            } else {
                color = 'var(--neon-cyan)';   // Win Zone
            }

            // Gradient Stops
            const start = i * sliceDeg;
            const end = (i + 1) * sliceDeg;
            grad += `${color} ${start}deg ${end}deg, `;

            // NUMBER PLACEMENT (Spoke Method)
            const spoke = document.createElement('div');
            spoke.className = 'spoke';
            // Rotation: index * slice + half slice to center
            const rot = (i * sliceDeg) + (sliceDeg / 2);
            spoke.style.transform = `rotate(${rot}deg)`;
            
            // The number text itself
            spoke.innerHTML = `<div class="num-text">${num}</div>`;
            wheel.appendChild(spoke);
        });

        // Apply Gradient
        grad = grad.slice(0, -2) + ')';
        wheel.style.background = grad;
    }

    // --- 5. SHOP DATA ---
    const players = [
        {n:"R.BIT", v:12000000}, {n:"M.PIXEL", v:8000000}, {n:"L.NEON", v:6000000},
        {n:"Z.CYAN", v:5500000}, {n:"K.PINK", v:5000000}, {n:"J.ARCADE", v:4500000},
        {n:"G.RETRO", v:4000000}, {n:"S.SCAN", v:3500000}, {n:"D.PAD", v:3000000},
        {n:"A.BUTTON", v:2500000}, {n:"B.BUTTON", v:2000000}, {n:"ST.ART", v:1800000},
        {n:"SEL.ECT", v:1600000}, {n:"P.ONE", v:1400000}, {n:"P.TWO", v:1200000},
        {n:"C.ROM", v:1000000}, {n:"R.AM", v:900000}, {n:"B.YTE", v:800000},
        {n:"G.LITCH", v:700000}, {n:"L.AG", v:600000}, {n:"P.ING", v:500000},
        {n:"S.ERVER", v:400000}, {n:"C.ODE", v:300000}, {n:"J.AVA", v:200000},
        {n:"H.TML", v:150000}, {n:"C.SS", v:100000}, {n:"S.CRIPT", v:50000},
        {n:"N.OOB", v:25000}, {n:"B.OT", v:10000}, {n:"NULL", v:5000}
    ];

    function updateShop() {
        grid.innerHTML = '';
        players.forEach(p => {
            const card = document.createElement('div');
            card.className = `player-card ${balance >= p.v ? 'affordable' : ''}`;
            card.innerHTML = `<div>${p.n}</div><div style="color:var(--neon-yellow); margin-top:5px">£${(p.v/1000000).toFixed(2)}M</div>`;
            grid.appendChild(card);
        });
    }

    // --- 6. GAME LOGIC ---
    window.setBet = function(amt) {
        if(spinsLeft < 1) return;
        if(amt === 'all') currentBet = balance;
        else currentBet = amt;

        if(currentBet > balance) {
            msgEl.innerText = "INSUFFICIENT FUNDS!";
            msgEl.style.color = "var(--neon-pink)";
            spinBtn.disabled = true;
            return;
        }

        msgEl.innerHTML = `BET LOCKED: <span style="color:var(--neon-cyan)">£${currentBet.toLocaleString()}</span>`;
        spinBtn.disabled = false;
    }

    window.spin = function() {
        if(spinsLeft < 1 || currentBet === 0) return;

        // Transaction
        balance -= currentBet;
        spinsLeft--;
        balEl.innerText = balance.toLocaleString();
        spinEl.innerText = spinsLeft;

        // Lock UI
        spinBtn.disabled = true;
        document.querySelectorAll('.btn-bet').forEach(b => b.disabled = true);
        msgEl.innerText = "BALL ROLLING...";

        // SPIN PHYSICS
        // Force: 4 full spins (1440) + random segment
        // We ensure it lands nicely by calculating the angle
        const randomOffset = Math.floor(Math.random() * 360);
        const spinForce = 1440 + 1440 + randomOffset; 
        
        rotation += spinForce;
        wheel.style.transform = `rotate(${rotation}deg)`;

        // Resolve after animation
        setTimeout(() => resolveSpin(rotation), 6000);
    }

    function resolveSpin(deg) {
        const sliceDeg = 360 / 37;
        const actualDeg = deg % 360;
        // Pointer is at Top (0). Wheel rotates Clockwise.
        // Slice under pointer = (360 - actual)
        const pointerPos = (360 - actualDeg) % 360;
        const index = Math.floor(pointerPos / sliceDeg);
        const num = wheelOrder[index];

        // DETERMINE RESULT based on Number properties
        let win = 0;
        let text = "";
        let colorClass = "";

        if (num === 0) {
            // JACKPOT
            win = currentBet * 10;
            text = `0! WORLDIE! JACKPOT! (+£${win.toLocaleString()})`;
            msgEl.style.color = "var(--neon-yellow)";
            colorClass = "win-fx";
        } else {
            const isRed = redNumbers.includes(num); // Pink Zone
            const isEven = (num % 2 === 0);

            if (isRed) {
                // LOSS ZONE (Pink)
                if (isEven) {
                    // Even Pink = VAR Check (Half Back)
                    win = Math.floor(currentBet * 0.5);
                    text = `${num} (PINK): VAR CHECK! SAVED £${win.toLocaleString()}`;
                    msgEl.style.color = "var(--neon-pink)";
                } else {
                    // Odd Pink = Red Card (Lose)
                    win = 0;
                    text = `${num} (PINK): RED CARD! BET LOST`;
                    msgEl.style.color = "var(--neon-pink)";
                    colorClass = "lose-fx";
                }
            } else {
                // WIN ZONE (Cyan)
                if (isEven) {
                    // Even Cyan = Hat-Trick (x4)
                    win = currentBet * 4;
                    text = `${num} (CYAN): HAT-TRICK! (+£${win.toLocaleString()})`;
                    msgEl.style.color = "var(--neon-cyan)";
                    colorClass = "win-fx";
                } else {
                    // Odd Cyan = Goal (x2)
                    win = currentBet * 2;
                    text = `${num} (CYAN): GOAL! (+£${win.toLocaleString()})`;
                    msgEl.style.color = "var(--neon-cyan)";
                    colorClass = "win-fx";
                }
            }
        }

        // Apply
        balance += win;
        balEl.innerText = balance.toLocaleString();
        msgEl.innerText = text;
        if(colorClass) document.body.classList.add(colorClass);

        setTimeout(() => document.body.classList.remove(colorClass), 500);
        updateShop();

        // Check End State
        if (spinsLeft > 0 && balance > 0) {
            document.querySelectorAll('.btn-bet').forEach(b => b.disabled = false);
        } else {
            if(balance > 0) {
                msgEl.innerText = "TRANSFER WINDOW OPEN";
                msgEl.style.color = "var(--neon-yellow)";
            } else {
                msgEl.innerText = "BANKRUPT - GAME OVER";
                msgEl.style.color = "#fff";
            }
        }
    }

    // Init
    initWheel();
    updateShop();

</script>
</body>
</html>
