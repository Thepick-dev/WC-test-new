<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>GOALSTORM! - ROULETTE</title>
<link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
<style>
/* --- CORE --- */
:root {
    --neon-cyan: #00f6ff;
    --neon-pink: #ff0055;
    --neon-yellow: #ffd60a;
    --bg-dark: #0f0e17;
    --wheel-bg: #111;
}

* { box-sizing: border-box; margin: 0; padding: 0; }

body { 
    background: #000; 
    font-family: 'Press Start 2P', cursive; 
    color: #fff;
    min-height: 100vh;
    display: flex;
    flex-direction: column;
    align-items: center;
    overflow-x: hidden;
}

/* --- HUD --- */
.hud {
    width: 100%;
    padding: 15px 20px;
    display: flex;
    justify-content: space-between;
    background: #111;
    border-bottom: 2px solid #333;
    z-index: 20;
}
.balance-box { color: var(--neon-yellow); text-shadow: 2px 2px var(--neon-pink); font-size: 14px; }
.spins-box { color: var(--neon-cyan); font-size: 14px; }

/* --- GAME STAGE --- */
.stage {
    display: flex;
    flex-wrap: wrap;
    justify-content: center;
    align-items: center;
    gap: 30px;
    margin-top: 20px;
    width: 100%;
    max-width: 900px;
}

/* --- THE WHEEL --- */
.wheel-container {
    position: relative;
    width: 340px;
    height: 340px;
    filter: drop-shadow(0 0 15px rgba(0,246,255,0.2));
}

.pointer {
    position: absolute;
    top: -15px;
    left: 50%;
    transform: translateX(-50%);
    width: 0; 
    height: 0; 
    border-left: 15px solid transparent;
    border-right: 15px solid transparent;
    border-top: 30px solid #fff;
    z-index: 10;
    filter: drop-shadow(0 0 2px #000);
}

.wheel {
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 8px solid #222;
    position: relative;
    overflow: hidden;
    transition: transform 5s cubic-bezier(0.1, 0.9, 0.2, 1);
}

/* Numbers on the wheel */
.number {
    position: absolute;
    top: 50%; left: 50%;
    transform-origin: 0 0;
    width: 50%; /* Radiate from center to edge */
    height: 2px; /* Thin visual guide */
    display: flex;
    justify-content: flex-end; /* Push text to edge */
}

.num-text {
    transform: rotate(90deg); /* Make text upright-ish relative to rim */
    font-size: 10px;
    margin-right: 12px; /* Padding from rim */
    color: #fff;
    text-shadow: 1px 1px 0 #000;
}

/* --- THE KEY (Legend) --- */
.key-panel {
    width: 280px;
    background: #111;
    border: 2px solid #444;
    padding: 20px;
}

.key-title { text-align: center; color: #888; margin-bottom: 15px; font-size: 12px; }

.key-item {
    display: flex;
    align-items: center;
    margin-bottom: 15px;
    font-size: 10px;
    line-height: 1.6;
}

.dot { width: 20px; height: 20px; margin-right: 15px; border: 2px solid #fff; }
.dot-green { background: var(--neon-yellow); box-shadow: 0 0 5px var(--neon-yellow); }
.dot-black { background: var(--neon-cyan); box-shadow: 0 0 5px var(--neon-cyan); }
.dot-red   { background: var(--neon-pink); box-shadow: 0 0 5px var(--neon-pink); }

/* --- CONTROLS --- */
.control-area {
    width: 100%;
    max-width: 600px;
    margin: 20px auto;
    text-align: center;
}

.msg-box {
    height: 40px;
    display: flex; align-items: center; justify-content: center;
    color: #fff;
    font-size: 14px;
    margin-bottom: 15px;
    text-shadow: 2px 2px #000;
}

.btn-group { display: flex; gap: 10px; justify-content: center; margin-bottom: 15px; }

button {
    background: #000;
    border: 2px solid #fff;
    color: #fff;
    font-family: 'Press Start 2P', cursive;
    padding: 12px;
    cursor: pointer;
    font-size: 10px;
    transition: 0.1s;
    text-transform: uppercase;
}
button:hover:not(:disabled) { transform: translateY(-2px); background: #222; }
button:active { transform: translateY(0); }
button:disabled { opacity: 0.3; cursor: not-allowed; }

.btn-bet { border-color: var(--neon-cyan); color: var(--neon-cyan); }
.btn-spin { 
    border-color: var(--neon-yellow); 
    color: var(--neon-yellow); 
    background: #111; 
    padding: 15px 30px; 
    font-size: 12px;
}

/* --- SHOP --- */
.shop-container {
    width: 100%;
    flex-grow: 1;
    background: #111;
    border-top: 4px solid #333;
    padding: 15px;
    overflow-y: auto;
}
.shop-header { text-align: center; font-size: 10px; color: #666; margin-bottom: 10px; }
.player-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 10px;
}
.player-card {
    background: #1a1a1a;
    border: 1px solid #333;
    padding: 10px;
    text-align: center;
    opacity: 0.3;
    font-size: 9px;
}
.player-card.affordable {
    opacity: 1;
    border-color: var(--neon-cyan);
    background: #0f0e17;
    box-shadow: 0 0 5px var(--neon-cyan);
    cursor: pointer;
}
.player-card.affordable:hover { background: #1a1a2e; }

/* Flash FX */
@keyframes flashWin { 0% { background: var(--neon-cyan); } 100% { background: #000; } }
@keyframes flashLoss { 0% { background: var(--neon-pink); } 100% { background: #000; } }
.flash-win { animation: flashWin 0.3s ease-out; }
.flash-loss { animation: flashLoss 0.3s ease-out; }

</style>
</head>
<body>

<div class="hud">
    <div class="balance-box">BANK: £<span id="bal">1,000,000</span></div>
    <div class="spins-box">SPINS: <span id="spins">3</span></div>
</div>

<div class="stage">
    <div class="wheel-container">
        <div class="pointer"></div>
        <div class="wheel" id="wheel"></div>
    </div>

    <div class="key-panel">
        <div class="key-title">RULES OF THE WHEEL</div>
        
        <div class="key-item">
            <div class="dot dot-green"></div>
            <div>
                <span style="color:var(--neon-yellow)">NUMBER 0 (JACKPOT)</span><br>
                WORLDIE! x10 MULTIPLIER
            </div>
        </div>

        <div class="key-item">
            <div class="dot dot-black"></div>
            <div>
                <span style="color:var(--neon-cyan)">CYAN (BLACK)</span><br>
                GOAL! x2 MULTIPLIER
            </div>
        </div>

        <div class="key-item">
            <div class="dot dot-red"></div>
            <div>
                <span style="color:var(--neon-pink)">PINK (RED)</span><br>
                MISS! LOSE BET
            </div>
        </div>
    </div>
</div>

<div class="control-area">
    <div class="msg-box" id="msg">PLACE YOUR BET</div>
    <div class="btn-group">
        <button class="btn-bet" onclick="setBet(100000)">£100K</button>
        <button class="btn-bet" onclick="setBet(500000)">£500K</button>
        <button class="btn-bet" onclick="setBet('all')">ALL IN</button>
    </div>
    <button class="btn-spin" id="spinBtn" onclick="spin()" disabled>SPIN THE WHEEL</button>
</div>

<div class="shop-container">
    <div class="shop-header">TRANSFER TARGETS</div>
    <div class="player-grid" id="grid"></div>
</div>

<script>
    // --- CONFIGURATION ---
    // Standard European Roulette Sequence
    const rouletteOrder = [
        0, 32, 15, 19, 4, 21, 2, 25, 17, 34, 6, 27, 13, 36, 11, 30, 8, 23, 
        10, 5, 24, 16, 33, 1, 20, 14, 31, 9, 22, 18, 29, 7, 28, 12, 35, 3, 26
    ];
    
    // In Roulette, Red/Black is specific. 
    // We will map them to Pink/Cyan styles.
    const redNumbers = [1,3,5,7,9,12,14,16,18,19,21,23,25,27,30,32,34,36];
    
    // Game State
    let balance = 1000000;
    let spinsLeft = 3;
    let currentBet = 0;
    let wheelRotation = 0;

    // Elements
    const wheel = document.getElementById('wheel');
    const balEl = document.getElementById('bal');
    const spinEl = document.getElementById('spins');
    const msgEl = document.getElementById('msg');
    const spinBtn = document.getElementById('spinBtn');

    // --- BUILD THE WHEEL ---
    function initWheel() {
        const sliceDeg = 360 / 37; // ~9.72 degrees per slice
        
        // 1. Generate Gradient String for Background
        // We need to construct a conic-gradient based on the sequence
        let gradientStr = 'conic-gradient(';
        
        rouletteOrder.forEach((num, i) => {
            let color;
            if (num === 0) color = 'var(--neon-yellow)'; // Green/Jackpot
            else if (redNumbers.includes(num)) color = 'var(--neon-pink)'; // Red/Loss
            else color = 'var(--neon-cyan)'; // Black/Win

            const startDeg = i * sliceDeg;
            const endDeg = (i + 1) * sliceDeg;
            gradientStr += `${color} ${startDeg}deg ${endDeg}deg, `;
        });
        
        // Remove trailing comma and close
        gradientStr = gradientStr.slice(0, -2) + ')';
        wheel.style.background = gradientStr;

        // 2. Place Numbers
        rouletteOrder.forEach((num, i) => {
            const el = document.createElement('div');
            el.className = 'number';
            // Rotation is: Index * sliceDeg + half a slice (to center number in color)
            const rot = (i * sliceDeg) + (sliceDeg / 2);
            // We need to offset by -90deg because CSS 0 is Top, but Transform Origin calculations 
            // usually start from Right in standard circle math, or Top.
            // Actually, we rotate the container div from center. 0deg = 3 o'clock? 
            // Let's rely on visual alignment. transform: rotate(X) rotates clockwise.
            // We want index 0 at the top.
            // With this CSS, 0 deg starts at 12 o'clock. 
            el.style.transform = `rotate(${rot}deg)`;
            el.innerHTML = `<div class="num-text">${num}</div>`;
            wheel.appendChild(el);
        });
    }

    // --- PLAYERS DATA ---
    const players = [
        {n:"R.BIT", v:12000000}, {n:"M.PIXEL", v:8000000}, {n:"L.NEON", v:6000000},
        {n:"Z.CYAN", v:5500000}, {n:"K.PINK", v:5000000}, {n:"J.ARCADE", v:4500000},
        {n:"G.RETRO", v:4000000}, {n:"S.SCAN", v:3500000}, {n:"D.PAD", v:3000000},
        {n:"A.BUTTON", v:2500000}, {n:"B.BUTTON", v:2000000}, {n:"ST.ART", v:1800000},
        {n:"SEL.ECT", v:1600000}, {n:"P.ONE", v:1400000}, {n:"P.TWO", v:1200000},
        {n:"C.ROM", v:1000000}, {n:"R.AM", v:900000}, {n:"B.YTE", v:800000},
        {n:"G.LITCH", v:700000}, {n:"L.AG", v:600000}, {n:"P.ING", v:500000},
        {n:"S.ERVER", v:400000}, {n:"C.ODE", v:300000}, {n:"J.AVA", v:200000},
        {n:"H.TML", v:150000}, {n:"C.SS", v:100000}, {n:"S.CRIPT", v:50000},
        {n:"N.OOB", v:25000}, {n:"B.OT", v:10000}, {n:"NULL", v:5000}
    ];

    function updateShop() {
        const grid = document.getElementById('grid');
        grid.innerHTML = '';
        players.forEach(p => {
            const el = document.createElement('div');
            el.className = `player-card ${balance >= p.v ? 'affordable' : ''}`;
            el.innerHTML = `<div>${p.n}</div><div style="color:#ffd60a; margin-top:5px">£${(p.v/1000000).toFixed(2)}M</div>`;
            grid.appendChild(el);
        });
    }

    // --- GAME LOGIC ---
    window.setBet = function(amount) {
        if(spinsLeft <= 0) return;
        
        if (amount === 'all') currentBet = balance;
        else currentBet = amount;

        if (currentBet > balance) {
            msgEl.innerText = "INSUFFICIENT FUNDS";
            msgEl.style.color = "var(--neon-pink)";
            spinBtn.disabled = true;
            return;
        }

        msgEl.innerText = `BET: £${currentBet.toLocaleString()}`;
        msgEl.style.color = "#fff";
        spinBtn.disabled = false;
    }

    window.spin = function() {
        if(spinsLeft <= 0 || currentBet === 0) return;

        // Deduct
        balance -= currentBet;
        spinsLeft--;
        balEl.innerText = balance.toLocaleString();
        spinEl.innerText = spinsLeft;

        // UI Lock
        spinBtn.disabled = true;
        const bets = document.querySelectorAll('.btn-bet');
        bets.forEach(b => b.disabled = true);
        msgEl.innerText = "SPINNING...";

        // Physics
        // Add huge rotation (at least 5 spins = 1800deg) + random
        const spinForce = 1800 + Math.floor(Math.random() * 2000); 
        wheelRotation += spinForce;
        wheel.style.transform = `rotate(${wheelRotation}deg)`;

        // Result Calculation
        setTimeout(() => {
            calculateResult(wheelRotation);
        }, 5000); // 5s spin match CSS
    }

    function calculateResult(rotation) {
        const sliceDeg = 360 / 37;
        
        // Get actual degree within 0-360
        const actualDeg = rotation % 360;
        
        // Pointer is at Top (0). Wheel rotates Clockwise.
        // The slice under the pointer is: (360 - actualDeg)
        const pointerDeg = (360 - actualDeg) % 360;
        
        // Calculate Index
        const index = Math.floor(pointerDeg / sliceDeg);
        
        // Get the Number
        const winningNum = rouletteOrder[index];
        
        // Check Win/Loss
        if (winningNum === 0) {
            // JACKPOT
            const win = currentBet * 10;
            balance += win;
            msgEl.innerText = `0! WORLDIE! JACKPOT (+£${win.toLocaleString()})`;
            msgEl.style.color = "var(--neon-yellow)";
            document.body.classList.add('flash-win');
        } else if (redNumbers.includes(winningNum)) {
            // RED = LOSS
            // Special Rule: Is it unlucky 13?
            // Let's keep it simple: ALL REDS LOSE
            msgEl.innerText = `${winningNum} RED! MISS! LOST BET`;
            msgEl.style.color = "var(--neon-pink)";
            document.body.classList.add('flash-loss');
        } else {
            // BLACK = WIN (x2)
            const win = currentBet * 2;
            balance += win;
            msgEl.innerText = `${winningNum} BLACK! GOAL! (+£${win.toLocaleString()})`;
            msgEl.style.color = "var(--neon-cyan)";
            document.body.classList.add('flash-win');
        }
        
        // Cleanup
        setTimeout(() => {
            document.body.classList.remove('flash-win');
            document.body.classList.remove('flash-loss');
        }, 300);

        balEl.innerText = balance.toLocaleString();
        updateShop();

        if (spinsLeft > 0 && balance > 0) {
            bets.forEach(b => b.disabled = false);
        } else {
            if(balance > 0) {
                msgEl.innerText = "MARKET OPEN";
                msgEl.style.color = "var(--neon-yellow)";
            } else {
                msgEl.innerText = "GAME OVER";
                msgEl.style.color = "#fff";
            }
        }
    }
    
    // Init
    initWheel();
    updateShop();
    const bets = document.querySelectorAll('.btn-bet');

</script>
</body>
</html>
